++ test -z /tmp/mc3-rjd/envs/r3.4.2/lib/R
++ . /tmp/mc3-rjd/envs/r3.4.2/lib/R/etc/javaconf
+++ :
+++ : '~autodetect~'
+++ : '~autodetect~'
+++ : '~autodetect~'
+++ /tmp/mc3-rjd/envs/r3.4.2/lib/R/bin/R CMD config DYLIB_EXT
++ DYLIB_EXT=.dylib
++ tools_classpath=/tmp/mc3-rjd/envs/r3.4.2/lib/R/share/java
++ revision='$Rev: 71736 $'
+++ set - '$Rev:' 71736 '$'
++ version=71736
++ version='R Java configurator: 3.4.2 (r71736)

Copyright (C) 2002-2015 The R Core Team.
This is free software; see the GNU General Public License version 2
or later for copying conditions.  There is NO warranty.'
++ usage='
Usage: R CMD javareconf [options]

Detect current Java setup and update the corresponding configuration in R.

Options:
  -h, --help     print this help message and exit
  -v, --version  print version info and exit
  -n, --dry-run  perform Java detection, but don'\''t touch any
                 configuration files
  -e <prog>      same as -n but exports all detected variables
                 and runs <prog>. If -e is the last argument
                 or <prog> is '\'''\'' then a shell is used instead
  xxx=yyy        evaluate the corresponding expression
                 (e.g. JAVA_HOME=/usr/lib/java)

Environment variables that can be used to influence the detection:
  JAVA           path to a Java interpreter executable
                 By default first '\''java'\'' command found on the PATH
                 is taken (unless JAVA_HOME is also specified).
  JAVA_HOME      home of the Java environment. If not specified,
                 it will be detected automatically from the Java
                 interpreter.
  JAVAC          path to a Java compiler
  JAVAH          path to a Java header/stub generator
  JAR            path to a Java archive tool

The following variables should be used with extreme caution. They
must all match, so use only if you have a very special setup that
javareconf cannot detect automatically:
  JAVA_LD_LIBRARY_PATH library path necessary at run-time
  JAVA_CPPFLAGS  C preprocessor flags necessary to compile JNI programs
  JAVA_LIBS      libraries (as linker flags) necessary to compile
                 JNI programs

Report bugs at <https://bugs.R-project.org>.'
++ dry_run=no
++ export_vars=no
++ test -n ''
++ test -z ''
++ JAVA_PATH=/tmp/mc3-rjd/envs/r3.4.2/bin:/Users/ray/anaconda3/bin:/Users/ray/miniconda3/bin:/Users/ray/miniconda/bin:/Users/ray/miniconda/bin:/Users/ray/miniconda/bin:/Users/ray/miniconda/bin:/Users/ray/miniconda/bin:/Users/ray/miniconda/bin:/Users/ray/miniconda/bin:/Users/ray/miniconda/bin:/Users/ray/miniconda/bin:/Users/ray/miniconda/bin:/Users/ray/miniconda/bin:/Users/ray/anaconda/bin:/Users/ray/anaconda/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/Library/TeX/texbin
++ JAVA_PATH=/tmp/mc3-rjd/envs/r3.4.2/bin:/Users/ray/anaconda3/bin:/Users/ray/miniconda3/bin:/Users/ray/miniconda/bin:/Users/ray/miniconda/bin:/Users/ray/miniconda/bin:/Users/ray/miniconda/bin:/Users/ray/miniconda/bin:/Users/ray/miniconda/bin:/Users/ray/miniconda/bin:/Users/ray/miniconda/bin:/Users/ray/miniconda/bin:/Users/ray/miniconda/bin:/Users/ray/miniconda/bin:/Users/ray/anaconda/bin:/Users/ray/anaconda/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/Library/TeX/texbin:/usr/java/bin:/usr/jdk/bin:/usr/lib/java/bin:/usr/lib/jdk/bin:/usr/local/java/bin:/usr/local/jdk/bin:/usr/local/lib/java/bin:/usr/local/lib/jdk/bin
++ test -z ''
++ save_IFS=' 	
'
++ IFS=:
++ for dir in '${JAVA_PATH}'
++ test -f /tmp/mc3-rjd/envs/r3.4.2/bin/java
++ for dir in '${JAVA_PATH}'
++ test -f /Users/ray/anaconda3/bin/java
++ for dir in '${JAVA_PATH}'
++ test -f /Users/ray/miniconda3/bin/java
++ for dir in '${JAVA_PATH}'
++ test -f /Users/ray/miniconda/bin/java
++ for dir in '${JAVA_PATH}'
++ test -f /Users/ray/miniconda/bin/java
++ for dir in '${JAVA_PATH}'
++ test -f /Users/ray/miniconda/bin/java
++ for dir in '${JAVA_PATH}'
++ test -f /Users/ray/miniconda/bin/java
++ for dir in '${JAVA_PATH}'
++ test -f /Users/ray/miniconda/bin/java
++ for dir in '${JAVA_PATH}'
++ test -f /Users/ray/miniconda/bin/java
++ for dir in '${JAVA_PATH}'
++ test -f /Users/ray/miniconda/bin/java
++ for dir in '${JAVA_PATH}'
++ test -f /Users/ray/miniconda/bin/java
++ for dir in '${JAVA_PATH}'
++ test -f /Users/ray/miniconda/bin/java
++ for dir in '${JAVA_PATH}'
++ test -f /Users/ray/miniconda/bin/java
++ for dir in '${JAVA_PATH}'
++ test -f /Users/ray/miniconda/bin/java
++ for dir in '${JAVA_PATH}'
++ test -f /Users/ray/anaconda/bin/java
++ for dir in '${JAVA_PATH}'
++ test -f /Users/ray/anaconda/bin/java
++ for dir in '${JAVA_PATH}'
++ test -f /usr/local/bin/java
++ for dir in '${JAVA_PATH}'
++ test -f /usr/bin/java
++ JAVA=/usr/bin/java
++ break
++ IFS=' 	
'
++ test -z /usr/bin/java
++ echo 'Java interpreter : /usr/bin/java'
Java interpreter : /usr/bin/java
+++ /usr/bin/java -classpath /tmp/mc3-rjd/envs/r3.4.2/lib/R/share/java getsp -test
++ jires=Test1234OK
++ test Test1234OK '!=' Test1234OK
++ test -z ''
+++ /usr/bin/java -classpath /tmp/mc3-rjd/envs/r3.4.2/lib/R/share/java getsp java.home
++ JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk-9.0.1.jdk/Contents/Home
++ test -z /Library/Java/JavaVirtualMachines/jdk-9.0.1.jdk/Contents/Home
+++ /usr/bin/java -classpath /tmp/mc3-rjd/envs/r3.4.2/lib/R/share/java getsp java.version
++ echo 'Java version     : 9.0.1'
Java version     : 9.0.1
++ echo 'Java home path   : /Library/Java/JavaVirtualMachines/jdk-9.0.1.jdk/Contents/Home'
Java home path   : /Library/Java/JavaVirtualMachines/jdk-9.0.1.jdk/Contents/Home
++ test -z ''
++ save_IFS=' 	
'
++ IFS=:
++ for dir in '${JAVA_PATH}'
++ test -f /tmp/mc3-rjd/envs/r3.4.2/bin/javac
++ for dir in '${JAVA_PATH}'
++ test -f /Users/ray/anaconda3/bin/javac
++ for dir in '${JAVA_PATH}'
++ test -f /Users/ray/miniconda3/bin/javac
++ for dir in '${JAVA_PATH}'
++ test -f /Users/ray/miniconda/bin/javac
++ for dir in '${JAVA_PATH}'
++ test -f /Users/ray/miniconda/bin/javac
++ for dir in '${JAVA_PATH}'
++ test -f /Users/ray/miniconda/bin/javac
++ for dir in '${JAVA_PATH}'
++ test -f /Users/ray/miniconda/bin/javac
++ for dir in '${JAVA_PATH}'
++ test -f /Users/ray/miniconda/bin/javac
++ for dir in '${JAVA_PATH}'
++ test -f /Users/ray/miniconda/bin/javac
++ for dir in '${JAVA_PATH}'
++ test -f /Users/ray/miniconda/bin/javac
++ for dir in '${JAVA_PATH}'
++ test -f /Users/ray/miniconda/bin/javac
++ for dir in '${JAVA_PATH}'
++ test -f /Users/ray/miniconda/bin/javac
++ for dir in '${JAVA_PATH}'
++ test -f /Users/ray/miniconda/bin/javac
++ for dir in '${JAVA_PATH}'
++ test -f /Users/ray/miniconda/bin/javac
++ for dir in '${JAVA_PATH}'
++ test -f /Users/ray/anaconda/bin/javac
++ for dir in '${JAVA_PATH}'
++ test -f /Users/ray/anaconda/bin/javac
++ for dir in '${JAVA_PATH}'
++ test -f /usr/local/bin/javac
++ for dir in '${JAVA_PATH}'
++ test -f /usr/bin/javac
++ JAVAC=/usr/bin/javac
++ break
++ IFS=' 	
'
++ : /var/folders/tx/wvlyhrvd3gv225fthmxz83_m0000z8/T/
++ tempdir=/var/folders/tx/wvlyhrvd3gv225fthmxz83_m0000z8/T//Rjavareconf.HOsynB
++ test -n /var/folders/tx/wvlyhrvd3gv225fthmxz83_m0000z8/T//Rjavareconf.HOsynB
++ test -d /var/folders/tx/wvlyhrvd3gv225fthmxz83_m0000z8/T//Rjavareconf.HOsynB
++ javac_works='not present'
++ test -n /usr/bin/javac
++ javac_works='not functional'
++ echo 'public class A { }'
++ test -f /var/folders/tx/wvlyhrvd3gv225fthmxz83_m0000z8/T//Rjavareconf.HOsynB/A.java
++ /usr/bin/javac /var/folders/tx/wvlyhrvd3gv225fthmxz83_m0000z8/T//Rjavareconf.HOsynB/A.java
++ test -f /var/folders/tx/wvlyhrvd3gv225fthmxz83_m0000z8/T//Rjavareconf.HOsynB/A.class
++ javac_works=yes
++ test yes = yes
++ echo 'Java compiler    : /usr/bin/javac'
Java compiler    : /usr/bin/javac
++ test -z ''
++ save_IFS=' 	
'
++ IFS=:
++ for dir in '${JAVA_PATH}'
++ test -f /tmp/mc3-rjd/envs/r3.4.2/bin/javah
++ for dir in '${JAVA_PATH}'
++ test -f /Users/ray/anaconda3/bin/javah
++ for dir in '${JAVA_PATH}'
++ test -f /Users/ray/miniconda3/bin/javah
++ for dir in '${JAVA_PATH}'
++ test -f /Users/ray/miniconda/bin/javah
++ for dir in '${JAVA_PATH}'
++ test -f /Users/ray/miniconda/bin/javah
++ for dir in '${JAVA_PATH}'
++ test -f /Users/ray/miniconda/bin/javah
++ for dir in '${JAVA_PATH}'
++ test -f /Users/ray/miniconda/bin/javah
++ for dir in '${JAVA_PATH}'
++ test -f /Users/ray/miniconda/bin/javah
++ for dir in '${JAVA_PATH}'
++ test -f /Users/ray/miniconda/bin/javah
++ for dir in '${JAVA_PATH}'
++ test -f /Users/ray/miniconda/bin/javah
++ for dir in '${JAVA_PATH}'
++ test -f /Users/ray/miniconda/bin/javah
++ for dir in '${JAVA_PATH}'
++ test -f /Users/ray/miniconda/bin/javah
++ for dir in '${JAVA_PATH}'
++ test -f /Users/ray/miniconda/bin/javah
++ for dir in '${JAVA_PATH}'
++ test -f /Users/ray/miniconda/bin/javah
++ for dir in '${JAVA_PATH}'
++ test -f /Users/ray/anaconda/bin/javah
++ for dir in '${JAVA_PATH}'
++ test -f /Users/ray/anaconda/bin/javah
++ for dir in '${JAVA_PATH}'
++ test -f /usr/local/bin/javah
++ for dir in '${JAVA_PATH}'
++ test -f /usr/bin/javah
++ JAVAH=/usr/bin/javah
++ break
++ IFS=' 	
'
++ echo 'Java headers gen.: /usr/bin/javah'
Java headers gen.: /usr/bin/javah
++ test -z ''
++ save_IFS=' 	
'
++ IFS=:
++ for dir in '${JAVA_PATH}'
++ test -f /tmp/mc3-rjd/envs/r3.4.2/bin/jar
++ for dir in '${JAVA_PATH}'
++ test -f /Users/ray/anaconda3/bin/jar
++ for dir in '${JAVA_PATH}'
++ test -f /Users/ray/miniconda3/bin/jar
++ for dir in '${JAVA_PATH}'
++ test -f /Users/ray/miniconda/bin/jar
++ for dir in '${JAVA_PATH}'
++ test -f /Users/ray/miniconda/bin/jar
++ for dir in '${JAVA_PATH}'
++ test -f /Users/ray/miniconda/bin/jar
++ for dir in '${JAVA_PATH}'
++ test -f /Users/ray/miniconda/bin/jar
++ for dir in '${JAVA_PATH}'
++ test -f /Users/ray/miniconda/bin/jar
++ for dir in '${JAVA_PATH}'
++ test -f /Users/ray/miniconda/bin/jar
++ for dir in '${JAVA_PATH}'
++ test -f /Users/ray/miniconda/bin/jar
++ for dir in '${JAVA_PATH}'
++ test -f /Users/ray/miniconda/bin/jar
++ for dir in '${JAVA_PATH}'
++ test -f /Users/ray/miniconda/bin/jar
++ for dir in '${JAVA_PATH}'
++ test -f /Users/ray/miniconda/bin/jar
++ for dir in '${JAVA_PATH}'
++ test -f /Users/ray/miniconda/bin/jar
++ for dir in '${JAVA_PATH}'
++ test -f /Users/ray/anaconda/bin/jar
++ for dir in '${JAVA_PATH}'
++ test -f /Users/ray/anaconda/bin/jar
++ for dir in '${JAVA_PATH}'
++ test -f /usr/local/bin/jar
++ for dir in '${JAVA_PATH}'
++ test -f /usr/bin/jar
++ JAR=/usr/bin/jar
++ break
++ IFS=' 	
'
++ echo 'Java archive tool: /usr/bin/jar'
Java archive tool: /usr/bin/jar
++ : '~autodetect~'
++ : '~autodetect~'
++ : '~autodetect~'
++ custom_JAVA_LIBS='~autodetect~'
++ custom_JAVA_CPPFLAGS='~autodetect~'
++ custom_JAVA_LD_LIBRARY_PATH='~autodetect~'
+++ uname
++ hostos=Darwin
++ test Darwin = Darwin
+++ echo /Library/Java/JavaVirtualMachines/jdk-9.0.1.jdk/Contents/Home
+++ grep '/Home$'
++ pref=/Library/Java/JavaVirtualMachines/jdk-9.0.1.jdk/Contents/Home
++ test /Library/Java/JavaVirtualMachines/jdk-9.0.1.jdk/Contents/Home = /Library/Java/JavaVirtualMachines/jdk-9.0.1.jdk/Contents/Home
++ echo 'System Java on macOS'
System Java on macOS
++ JAVA_CPPFLAGS=-I/System/Library/Frameworks/JavaVM.framework/Headers
++ JAVA_LIBS='-framework JavaVM'
++ JAVA_LD_LIBRARY_PATH=
++ has_libjvm=unknown
++ test '-framework JavaVM' = '~autodetect~'
++ test -n ''
++ acx_custom_java_libs=no
++ test '~autodetect~' '!=' '~autodetect~'
++ test '~autodetect~' '!=' '~autodetect~'
++ test '~autodetect~' '!=' '~autodetect~'
++ wd=/Users/ray/conda/aggregateR/r-rjava-feedstock/recipe
++ cd /var/folders/tx/wvlyhrvd3gv225fthmxz83_m0000z8/T//Rjavareconf.HOsynB
++ echo

++ echo 'trying to compile and link a JNI program '
trying to compile and link a JNI program 
++ echo 'detected JNI cpp flags    : -I/System/Library/Frameworks/JavaVM.framework/Headers'
detected JNI cpp flags    : -I/System/Library/Frameworks/JavaVM.framework/Headers
++ echo 'detected JNI linker flags : -framework JavaVM'
detected JNI linker flags : -framework JavaVM
++ cat
+++ echo -I/System/Library/Frameworks/JavaVM.framework/Headers
+++ /usr/bin/sed -e 's:$(JAVA_HOME):/Library/Java/JavaVirtualMachines/jdk-9.0.1.jdk/Contents/Home:g'
++ JAVA_CPPFLAGS1=-I/System/Library/Frameworks/JavaVM.framework/Headers
+++ echo -framework JavaVM
+++ /usr/bin/sed -e 's:$(JAVA_HOME):/Library/Java/JavaVirtualMachines/jdk-9.0.1.jdk/Contents/Home:g'
++ JAVA_LIBS1='-framework JavaVM'
++ cat
++ MAKEFLAGS=
++ export MAKEFLAGS
++ /tmp/mc3-rjd/envs/r3.4.2/lib/R/bin/R CMD SHLIB conftest.c
x86_64-apple-darwin13.4.0-clang -I/tmp/mc3-rjd/envs/r3.4.2/lib/R/include -DNDEBUG -I/System/Library/Frameworks/JavaVM.framework/Headers  -D_FORTIFY_SOURCE=2 -mmacosx-version-min=10.9 -I/tmp/mc3-rjd/envs/r3.4.2/include   -fPIC  -march=core2 -mtune=haswell -mssse3 -ftree-vectorize -fPIC -fPIE -fstack-protector-strong -O2 -pipe -I/tmp/mc3-rjd/envs/r3.4.2/include  -c conftest.c -o conftest.o
conftest.c:1:10: fatal error: 'jni.h' file not found
#include <jni.h>
         ^~~~~~~
1 error generated.
make: *** [conftest.o] Error 1
++ ac_status=1
++ test 1 '!=' 0
++ echo 'Unable to compile a JNI program, ignoring this though as you may not want to compile anything here'
Unable to compile a JNI program, ignoring this though as you may not want to compile anything here
++ echo '.. this is an Anaconda Distribution and conda-forge customization whereby env activation causes us'
.. this is an Anaconda Distribution and conda-forge customization whereby env activation causes us
++ echo '.. to call R CMD javareconf in order to dynamically detect a JDK that may be in that env. The fact'
.. to call R CMD javareconf in order to dynamically detect a JDK that may be in that env. The fact
++ echo '.. that we prohibit setting LD_LIBRARY_PATH is also somewhat responsible for us needing to do this'
.. that we prohibit setting LD_LIBRARY_PATH is also somewhat responsible for us needing to do this
++ echo '.. because ${R_HOME}/etc/ldpaths is the normal way that R dynamically finds shared libraries. This'
.. because ${R_HOME}/etc/ldpaths is the normal way that R dynamically finds shared libraries. This
++ echo '.. is what would, in upstream R, set LD_LIBRARY_PATH. AD cannot set this as it causes all sorts of'
.. is what would, in upstream R, set LD_LIBRARY_PATH. AD cannot set this as it causes all sorts of
++ echo '.. issues with DT_RUNPATH / DT_RPATH on various distributions.'
.. issues with DT_RUNPATH / DT_RPATH on various distributions.
++ rm -f conftest.c conftest.o conftest.so Makevars
++ cd /Users/ray/conda/aggregateR/r-rjava-feedstock/recipe
++ rm -rf /var/folders/tx/wvlyhrvd3gv225fthmxz83_m0000z8/T//Rjavareconf.HOsynB
++ echo ''

++ test no = yes
++ echo ''

++ echo 'JAVA_HOME        : /Library/Java/JavaVirtualMachines/jdk-9.0.1.jdk/Contents/Home'
JAVA_HOME        : /Library/Java/JavaVirtualMachines/jdk-9.0.1.jdk/Contents/Home
++ echo 'Java library path: '
Java library path: 
++ echo 'JNI cpp flags    : -I/System/Library/Frameworks/JavaVM.framework/Headers'
JNI cpp flags    : -I/System/Library/Frameworks/JavaVM.framework/Headers
++ echo 'JNI linker flags : -framework JavaVM'
JNI linker flags : -framework JavaVM
++ test no = yes
++ echo 'Updating Java configuration in /tmp/mc3-rjd/envs/r3.4.2/lib/R'
Updating Java configuration in /tmp/mc3-rjd/envs/r3.4.2/lib/R
++ test -n ''
++ files='/tmp/mc3-rjd/envs/r3.4.2/lib/R/etc/Makeconf /tmp/mc3-rjd/envs/r3.4.2/lib/R/etc/ldpaths'
++ for file in '$files'
++ /usr/bin/sed -e 's|JAVA =.\{0,\}|JAVA = /usr/bin/java|' -e 's|JAVA_HOME =.\{0,\}|JAVA_HOME = /Library/Java/JavaVirtualMachines/jdk-9.0.1.jdk/Contents/Home|' -e 's|: ${JAVA_HOME=.\{1,\}|: ${JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk-9.0.1.jdk/Contents/Home}|' -e 's|: ${R_JAVA_LD_LIBRARY_PATH=.\{1,\}|: ${R_JAVA_LD_LIBRARY_PATH=}|' -e 's|JAVA_LIBS =.\{0,\}|JAVA_LIBS = -framework JavaVM|g' -e 's|JAVA_LD_LIBRARY_PATH =.\{0,\}|JAVA_LD_LIBRARY_PATH = |' -e 's|JAVAC =.\{0,\}|JAVAC = /usr/bin/javac|' -e 's|JAVAH =.\{0,\}|JAVAH = /usr/bin/javah|' -e 's|JAR =.\{0,\}|JAR = /usr/bin/jar|' -e 's|JAVA_CPPFLAGS =.\{0,\}|JAVA_CPPFLAGS = -I/System/Library/Frameworks/JavaVM.framework/Headers|g' /tmp/mc3-rjd/envs/r3.4.2/lib/R/etc/Makeconf
++ test -f /tmp/mc3-rjd/envs/r3.4.2/lib/R/etc/Makeconf.new
++ mv /tmp/mc3-rjd/envs/r3.4.2/lib/R/etc/Makeconf.new /tmp/mc3-rjd/envs/r3.4.2/lib/R/etc/Makeconf
++ for file in '$files'
++ /usr/bin/sed -e 's|JAVA =.\{0,\}|JAVA = /usr/bin/java|' -e 's|JAVA_HOME =.\{0,\}|JAVA_HOME = /Library/Java/JavaVirtualMachines/jdk-9.0.1.jdk/Contents/Home|' -e 's|: ${JAVA_HOME=.\{1,\}|: ${JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk-9.0.1.jdk/Contents/Home}|' -e 's|: ${R_JAVA_LD_LIBRARY_PATH=.\{1,\}|: ${R_JAVA_LD_LIBRARY_PATH=}|' -e 's|JAVA_LIBS =.\{0,\}|JAVA_LIBS = -framework JavaVM|g' -e 's|JAVA_LD_LIBRARY_PATH =.\{0,\}|JAVA_LD_LIBRARY_PATH = |' -e 's|JAVAC =.\{0,\}|JAVAC = /usr/bin/javac|' -e 's|JAVAH =.\{0,\}|JAVAH = /usr/bin/javah|' -e 's|JAR =.\{0,\}|JAR = /usr/bin/jar|' -e 's|JAVA_CPPFLAGS =.\{0,\}|JAVA_CPPFLAGS = -I/System/Library/Frameworks/JavaVM.framework/Headers|g' /tmp/mc3-rjd/envs/r3.4.2/lib/R/etc/ldpaths
++ test -f /tmp/mc3-rjd/envs/r3.4.2/lib/R/etc/ldpaths.new
++ mv /tmp/mc3-rjd/envs/r3.4.2/lib/R/etc/ldpaths.new /tmp/mc3-rjd/envs/r3.4.2/lib/R/etc/ldpaths
++ echo Done.
Done.
++ echo ''

